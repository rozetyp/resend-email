<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Resend Pad – Free Email Editor | Send Without Code</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Free email editor for Resend. Paste your API key, load verified domains, compose and send emails without code. No storage, no tracking." />
  <meta name="keywords" content="Resend email editor, send email without code, free email tool, BYOK email, Resend API UI, no-code email" />
  <meta name="author" content="Resend Pad" />
  <meta name="robots" content="index, follow" />
  <meta property="og:title" content="Resend Pad – Send Emails Without Code" />
  <meta property="og:description" content="Free email editor for Resend. Paste key, load domains, compose, send. No storage." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://resendpad.up.railway.app" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Resend Pad – Send Emails Without Code" />
  <meta name="twitter:description" content="Free email editor for Resend. No code, no storage, no tracking." />
  <meta name="google-site-verification" content="RqTkgBU8WKBxrFgDaU4OTdzd2EdYXZ_YMjoOkhOGVdU" />
  <link rel="canonical" href="https://resendpad.up.railway.app" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='75' font-size='75' font-weight='bold' fill='%232563eb'>P</text></svg>" />
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Quill Rich Text Editor CSS -->
  <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Resend Pad",
    "description": "Free email editor for Resend. Send emails without code.",
    "url": "https://resendpad.up.railway.app",
    "applicationCategory": "ProductionApplication",
    "operatingSystem": "Web",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "creator": {
      "@type": "Organization",
      "name": "Resend Pad",
      "url": "https://github.com/rozetyp/resend-email"
    }
  }
  </script>
  
  <style>
    /* Custom styles for Quill editor */
    .ql-editor {
      min-height: 250px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    
    .ql-toolbar.ql-snow {
      border-top: 1px solid #d1d5db;
      border-left: 1px solid #d1d5db;
      border-right: 1px solid #d1d5db;
      border-bottom: 0;
      border-top-left-radius: 0.5rem;
      border-top-right-radius: 0.5rem;
      background: #f9fafb;
    }
    
    .ql-container.ql-snow {
      border-bottom: 1px solid #d1d5db;
      border-left: 1px solid #d1d5db;
      border-right: 1px solid #d1d5db;
      border-top: 0;
      border-bottom-left-radius: 0.5rem;
      border-bottom-right-radius: 0.5rem;
    }
  </style>
</head>

<body class="bg-gray-100">
  <!-- ============ MAIN APP CONTAINER ============ -->
  <div class="min-h-screen w-full p-4 sm:p-8 flex items-center justify-center">
    
    <div class="w-full max-w-3xl bg-white text-gray-900 rounded-xl shadow-2xl p-6 sm:p-8 mt-16">
      
      <div class="flex items-center justify-center mb-2 gap-3">
        <h1 class="text-3xl font-bold text-center text-gray-900">
          Resend Pad
        </h1>
        <a href="https://github.com/rozetyp/resend-email" target="_blank" rel="noopener noreferrer" title="View source on GitHub" class="text-gray-400 hover:text-gray-700 transition-colors">
          <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.108-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.91 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.085 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
        </a>
      </div>
      
      <p class="text-center text-sm text-gray-600 mb-6">
        Send emails with Resend using your own API key. No server relay. Built for developers.
      </p>
      
      <div class="form-container">
        <form id="send_form">
          
          <!-- API KEY INPUT -->
          <div class="mb-5">
            <label for="api_key" class="block mb-2 text-sm font-medium text-gray-900">Your Resend API Key</label>
            <input 
              type="password" 
              id="api_key" 
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="re_xxxxxxxxxxxxxxxxxxxxx" 
              style="font-family: 'Courier New', monospace;"
              required
            />
            <p class="mt-1 text-xs text-gray-500">Stays in your browser. Never stored.</p>
            <div class="p-3 mt-3 text-xs text-blue-800 rounded-lg bg-blue-50" role="alert">
              Tip: Need "Full Access" key to list domains. <a href="https://resend.com/api-keys" target="_blank" class="underline hover:no-underline">Get one →</a>
            </div>
          </div>

          <!-- FROM EMAIL -->
          <div class="mb-5">
            <label for="from_email" class="block mb-2 text-sm font-medium text-gray-900">From Email</label>
            <div class="flex flex-col sm:flex-row gap-2">
              <input 
                id="from_email" 
                name="from_email" 
                type="email" 
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                placeholder="no-reply@yourdomain.com" 
                required 
              />
              <button type="button" id="fetch_domains_btn" class="flex-shrink-0 text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium rounded-lg text-sm px-4 py-2.5">
                Load Domains
              </button>
            </div>
            <p class="mt-1 text-xs text-gray-500">Must be verified in your Resend account.</p>
            <div id="domains_list" class="hidden mt-2 p-3 bg-blue-50 rounded-lg text-sm text-blue-800"></div>
          </div>

          <!-- TO EMAIL -->
          <div class="mb-5">
            <label for="to_email" class="block mb-2 text-sm font-medium text-gray-900">To Email</label>
            <input 
              id="to_email" 
              name="to_email" 
              type="email" 
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="recipient@example.com" 
              required 
            />
            <p class="mt-1 text-xs text-gray-500">Single recipient email address.</p>
          </div>

          <!-- SUBJECT -->
          <div class="mb-5">
            <label for="subject" class="block mb-2 text-sm font-medium text-gray-900">Subject</label>
            <input 
              id="subject" 
              name="subject" 
              type="text" 
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              placeholder="Your email subject" 
              required 
            />
          </div>

          <!-- EMAIL BODY (QUILL EDITOR) -->
          <div class="mb-5">
            <label for="quill-editor" class="block mb-2 text-sm font-medium text-gray-900">Email Body</label>
            <div id="quill-editor"></div>
            <input type="hidden" id="body" name="body" value="" />
          </div>

          <!-- JS-controlled ERROR/SUCCESS ALERTS -->
          <div id="message_container">
            <!-- JS will inject success/error messages here -->
          </div>
          
          <!-- Non-blocking JS error message -->
          <div id="error-message" class="hidden p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50" role="alert"></div>

          <!-- ACTION BUTTONS -->
          <div class="flex justify-between">
            <button type="reset" id="reset_btn" class="text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5">
              Reset
            </button>
            <button type="submit" id="send_btn" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 focus:outline-none">
              Send Email
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ============ QUILL EDITOR & INTERACTIONS ============ -->
  <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
  <script>
    // Auto-detect API URL based on environment
    const API_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
      ? 'http://localhost:3001'
      : `${window.location.protocol}//${window.location.host}`;
    
    document.addEventListener('DOMContentLoaded', function() {
        // ============ QUILL EDITOR ============
        var quill = new Quill('#quill-editor', {
          theme: 'snow',
          modules: {
            toolbar: [
              ['bold', 'italic', 'underline'],
              [{ 'header': [1, 2, false] }],
              [{ 'list': 'ordered'}, { 'list': 'bullet' }],
              ['link'],
              ['code-block'],
              ['clean']
            ]
          }
        });

        // Update hidden input when content changes
        quill.on('text-change', function() {
          document.getElementById('body').value = quill.root.innerHTML;
        });

        // Pre-populate editor if there's saved content
        const savedContent = document.getElementById('body').value;
        if(savedContent){
          quill.root.innerHTML = savedContent;
        }

        // ============ DOMAIN FETCHING ============
        const fetchDomainsBtn = document.getElementById('fetch_domains_btn');
        const domainsList = document.getElementById('domains_list');
        const apiKeyInput = document.getElementById('api_key');
        const fromEmailInput = document.getElementById('from_email');

        fetchDomainsBtn.addEventListener('click', async function(e) {
          e.preventDefault();
          const apiKey = apiKeyInput.value.trim();
          
          if (!apiKey) {
            domainsList.textContent = '❌ Please enter your Resend API key first.';
            domainsList.classList.remove('hidden');
            return;
          }

          fetchDomainsBtn.disabled = true;
          fetchDomainsBtn.textContent = 'Loading...';
          domainsList.classList.add('hidden');

          try {
            // Call Resend API to get domains
            const response = await fetch(`${API_URL}/api/domains`, {
              method: 'GET',
              headers: {
                'Authorization': `Bearer ${apiKey}`
              }
            });

            const data = await response.json();

            if (!response.ok) {
              // Handle different error scenarios
              if (response.status === 401 || response.status === 403) {
                throw new Error(`Unauthorized: Your API key may be "Sending Only" or invalid. Use a "Full Access" key to list domains. Get one at https://resend.com/api-keys`);
              } else if (response.status === 429) {
                throw new Error(`Rate limited: Too many requests. Wait a moment and try again.`);
              } else {
                const errorMsg = data.message || data.error || `API error: ${response.status}`;
                throw new Error(errorMsg);
              }
            }

            const domains = data.data || [];
            
            if (domains.length === 0) {
              domainsList.textContent = '❌ No verified domains found. Add one in your Resend dashboard at https://resend.com/domains';
              domainsList.classList.remove('hidden');
            } else {
              // Create domain selector
              let html = '<strong>Select a verified domain:</strong><div class="mt-2 flex flex-wrap gap-2">';
              domains.forEach(domain => {
                html += `<button type="button" class="domain-btn text-xs font-medium px-2.5 py-1.5 rounded-md bg-white border border-gray-300 hover:bg-gray-100" data-domain="${domain.name}">${domain.name}</button>`;
              });
              html += '</div>';
              domainsList.innerHTML = html;
              domainsList.classList.remove('hidden');

              // Add click handlers to domain buttons
              document.querySelectorAll('.domain-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                  e.preventDefault();
                  const domain = this.dataset.domain;
                  const defaultFrom = fromEmailInput.value.split('@')[0] || 'noreply';
                  fromEmailInput.value = `${defaultFrom}@${domain}`;
                  domainsList.classList.add('hidden');
                });
              });
            }
          } catch (error) {
            domainsList.innerHTML = `<strong>❌ Failed to fetch domains:</strong><div class="mt-1 text-xs">${error.message}</div><div class="mt-2 text-xs text-gray-600">Still having issues? You can manually enter your From email (must be verified in Resend).</div>`;
            domainsList.classList.remove('hidden');
            console.error('Domain fetch error:', error);
          } finally {
            fetchDomainsBtn.disabled = false;
            fetchDomainsBtn.textContent = 'Load Domains';
          }
        });

        // ============ FORM SUBMISSION ============
        const form = document.getElementById('send_form');
        const errorDiv = document.getElementById('error-message');
        const messageContainer = document.getElementById('message_container');
        const sendBtn = document.getElementById('send_btn');
        const resetBtn = document.getElementById('reset_btn');

        // Reset button handler (clears Quill editor too)
        resetBtn.addEventListener('click', function() {
          form.reset();
          if (quill) {
            quill.setContents([]);
          }
          document.getElementById('body').value = '';
          errorDiv.classList.add('hidden');
          messageContainer.innerHTML = '';
        });

        if(form){
          form.addEventListener('submit', async function(e){
            e.preventDefault(); // Stop default form submission
            console.log('Form submitted');
            
            // 0. Clear previous messages
            errorDiv.classList.add('hidden');
            errorDiv.textContent = '';
            messageContainer.innerHTML = ''; // Clear server-rendered messages

            // 1. Get content from Quill editor
            if (!quill) {
              console.error('Quill editor not found');
              errorDiv.textContent = 'Error: Email editor not loaded correctly. Try refreshing the page.';
              errorDiv.classList.remove('hidden');
              return;
            }
            const bodyHtml = quill.root.innerHTML;
            document.getElementById('body').value = bodyHtml;
            
            // 2. Non-blocking validation
            if(!quill.getText().trim()){
              errorDiv.textContent = 'Email body cannot be empty.';
              errorDiv.classList.remove('hidden');
              quill.focus();
              return;
            }

            // 3. Get all form data
            const apiKey = document.getElementById('api_key').value;
            const from = document.getElementById('from_email').value;
            const to = document.getElementById('to_email').value;
            const subject = document.getElementById('subject').value;
            const body = document.getElementById('body').value;

            console.log('Form data:', { apiKey: '***', from, to, subject, bodyLength: body.length });

            if (!apiKey) {
              errorDiv.textContent = 'API Key cannot be empty.';
              errorDiv.classList.remove('hidden');
              document.getElementById('api_key').focus();
              return;
            }
            
            // 4. Update UI to show sending state
            sendBtn.disabled = true;
            sendBtn.textContent = 'Sending...';

            try {
              // 5. Construct API request
              const payload = {
                from: from,
                to: [to], // Resend API expects 'to' as an array
                subject: subject,
                html: body
              };

              console.log('Sending to Resend API...');
              console.log('Payload:', payload);

              // 6. Send via API proxy to Resend
              const response = await fetch(`${API_URL}/api/send`, {
                method: 'POST',
                headers: {
                  'Authorization': `Bearer ${apiKey}`,
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
              });

              console.log('Response status:', response.status);

              const data = await response.json();
              console.log('Response data:', data);

              if (!response.ok) {
                // Handle API errors (e.g., validation, auth)
                const errorMsg = data.message || 'An unknown error occurred.';
                throw new Error(`API Error (${data.name}): ${errorMsg}`);
              }
              
              // 7. Show success message
              messageContainer.innerHTML = `
                <div class="p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50" role="alert">
                  <span class="font-medium">✓ Email Sent Successfully!</span>
                  <div class="mt-2 p-3 bg-green-100 rounded font-mono text-xs">
                    <div><strong>Email ID:</strong> ${data.id}</div>
                    <div class="mt-1"><strong>To:</strong> ${to}</div>
                    <div class="mt-1"><strong>From:</strong> ${from}</div>
                  </div>
                </div>
              `;
              
            } catch (error) {
              // 8. Show failure message with actionable guidance
              let errorMsg = error.message;
              
              console.error('Send error:', error);
              
              // Provide context-specific help
              if (errorMsg.includes('401') || errorMsg.includes('Unauthorized')) {
                errorMsg += ' → Check your API key at https://resend.com/api-keys';
              } else if (errorMsg.includes('invalid_from_address') || errorMsg.includes('from')) {
                errorMsg += ' → "From" email must be verified in your Resend account';
              } else if (errorMsg.includes('invalid_to_address') || errorMsg.includes('to')) {
                errorMsg += ' → "To" email address is invalid';
              } else if (errorMsg.includes('missing_required_parameters')) {
                errorMsg += ' → All fields are required (Subject, To, From, Body)';
              }
              
              messageContainer.innerHTML = `
                <div class="p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50" role="alert">
                  <span class="font-medium">❌ Send Failed:</span>
                  <div class="mt-1 text-xs">${errorMsg}</div>
                  <div class="mt-2 text-xs text-gray-600">Debug: Check the browser console (F12) for more details.</div>
                </div>
              `;
            } finally {
              // 9. Reset button state
              sendBtn.disabled = false;
              sendBtn.textContent = 'Send Email';
            }
          });
        } else {
          console.error('Form element not found');
        }
      });
    </script>
    
    <!-- FOOTER -->
    <div class="mt-12 pt-8 pb-4 border-t border-gray-200 text-center text-xs text-gray-500">
      Made by 
      <a href="mailto:rozetyp@gmail.com" class="text-blue-600 hover:underline">rozetyp</a>
      · 
      <a href="https://buymeacoffee.com/sandbar" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">☕ Buy Me a Coffee</a>
      · 
      <a href="https://github.com/rozetyp/resend-email" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:underline">GitHub</a>
    </div>